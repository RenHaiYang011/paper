# è®­ç»ƒé…ç½®ä¼˜åŒ–å»ºè®®

## ğŸ“Š å½“å‰é—®é¢˜åˆ†æ

### è§‚å¯Ÿåˆ°çš„é—®é¢˜
```
Training step: 1/16000, Step Time: 76.52s, ETA: 340:05:14
```

**é—®é¢˜**:
- æ€»è®­ç»ƒæ­¥æ•°: 16,000æ­¥ âŒ (å¤ªå¤š)
- æ¯æ­¥è€—æ—¶: 76.52ç§’ âŒ (å¤ªæ…¢)
- é¢„è®¡æ—¶é—´: 340å°æ—¶ â‰ˆ 14å¤© âŒ (ä¸å¯æ¥å—)

---

## ğŸ¯ ä¼˜åŒ–åçš„é…ç½®

### æ¨èé…ç½® (å·²åº”ç”¨)

```yaml
networks:
  data_passes: 3      # ä»5å‡åˆ°3
  batch_size: 64      # ä»128å‡åˆ°64
  batch_number: 3     # ä»5å‡åˆ°3
```

### æ•ˆæœå¯¹æ¯”

| å‚æ•° | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹å–„ |
|------|--------|--------|------|
| æ€»è®­ç»ƒæ­¥æ•° | 16,000 | ~5,859 | â†“ 63% |
| é¢„è®¡æ—¶é—´ | 340å°æ—¶ | ~40-80å°æ—¶ | â†“ 76% |
| æ¯æ­¥batchæ•° | 640 | 192 | â†“ 70% |

**æ–°çš„è®­ç»ƒæ­¥æ•°è®¡ç®—**:
```
æ€»æ­¥æ•° = 1500 Ã— (64 Ã— 3) / (15 Ã— 4)
      = 1500 Ã— 192 / 60
      = 4,800 æ­¥
```

---

## âš¡ å¦‚æœè¿˜æ˜¯å¤ªæ…¢

### æ–¹æ¡ˆA: è¿›ä¸€æ­¥å‡å°‘è®­ç»ƒé‡ (å¿«é€Ÿæµ‹è¯•)

```yaml
experiment:
  missions:
    n_episodes: 1000    # ä»1500å‡åˆ°1000

networks:
  data_passes: 2        # ä»3å‡åˆ°2
  batch_size: 48        # ä»64å‡åˆ°48
  batch_number: 2       # ä»3å‡åˆ°2
```

**æ•ˆæœ**: 
- è®­ç»ƒæ­¥æ•°: ~2,222æ­¥
- é¢„è®¡æ—¶é—´: 15-30å°æ—¶

---

### æ–¹æ¡ˆB: æ¿€è¿›ä¼˜åŒ– (æœ€å¿«ï¼Œé€‚åˆè°ƒè¯•)

```yaml
experiment:
  missions:
    n_episodes: 500     # å¤§å¹…å‡å°‘
  constraints:
    budget: 10          # ä»14å‡åˆ°10

networks:
  data_passes: 1
  batch_size: 32
  batch_number: 2
```

**æ•ˆæœ**:
- è®­ç»ƒæ­¥æ•°: ~727æ­¥
- é¢„è®¡æ—¶é—´: 5-10å°æ—¶

---

## ğŸ” æ€§èƒ½ç“¶é¢ˆåˆ†æ

### ä¸ºä»€ä¹ˆæ¯æ­¥éœ€è¦76ç§’ï¼Ÿ

å¯èƒ½çš„åŸå› :
1. **æ•°æ®é¢„å¤„ç†æ…¢** - CPUå¤„ç†ç“¶é¢ˆ
2. **GPUåˆ©ç”¨ç‡ä½** - batchå¤ªå°æˆ–æ•°æ®ä¼ è¾“æ…¢
3. **æ—¥å¿—/å¯è§†åŒ–å¼€é”€** - TensorBoardè®°å½•å¤ªé¢‘ç¹
4. **é¦–æ¬¡è¿è¡Œç¼–è¯‘** - cuDNNéœ€è¦é¢„çƒ­

### ä¼˜åŒ–å»ºè®®

#### 1. å‡å°‘æ—¥å¿—é¢‘ç‡

åœ¨`coma_mission.py`ä¸­æŸ¥æ‰¾:
```python
self.figure_interval = 20
self.histogram_interval = 200
```

æ”¹ä¸º:
```python
self.figure_interval = 100   # ä»20å¢åŠ åˆ°100
self.histogram_interval = 500  # ä»200å¢åŠ åˆ°500
```

#### 2. ç¦ç”¨éƒ¨åˆ†å¯è§†åŒ–ï¼ˆä¸´æ—¶ï¼‰

å¦‚æœé€Ÿåº¦è¿˜æ˜¯æ…¢ï¼Œå¯ä»¥æš‚æ—¶æ³¨é‡Šæ‰ä¸€äº›ç»˜å›¾ä»£ç ã€‚

#### 3. æ£€æŸ¥GPUåˆ©ç”¨ç‡

åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œ:
```bash
watch -n 1 nvidia-smi
```

**ç›®æ ‡**: GPUåˆ©ç”¨ç‡åº”è¯¥ >60%

å¦‚æœåˆ©ç”¨ç‡å¾ˆä½(<30%)ï¼Œè¯´æ˜ç“¶é¢ˆåœ¨CPUæ•°æ®é¢„å¤„ç†ã€‚

---

## ğŸš€ ç«‹å³è¡ŒåŠ¨æ–¹æ¡ˆ

### å½“å‰è®­ç»ƒå¦‚ä½•å¤„ç†ï¼Ÿ

**é€‰é¡¹1**: åœæ­¢å½“å‰è®­ç»ƒï¼Œä½¿ç”¨æ–°é…ç½®é‡æ–°å¼€å§‹
```bash
# åœ¨è®­ç»ƒç»ˆç«¯æŒ‰ Ctrl+C
# ç„¶åé‡æ–°è¿è¡Œ
python main.py
```

**é€‰é¡¹2**: è®©å®ƒç»§ç»­è·‘ä¸€ä¼šå„¿è§‚å¯Ÿ
- ç¬¬ä¸€æ­¥é€šå¸¸æœ€æ…¢ï¼ˆç¼–è¯‘ä¼˜åŒ–ï¼‰
- åç»­æ­¥éª¤åº”è¯¥ä¼šå¿«ä¸€äº›
- è§‚å¯Ÿ10-20æ­¥åçš„å¹³å‡é€Ÿåº¦

---

## ğŸ“ˆ ç›‘æ§è®­ç»ƒè¿›åº¦

### å…³é”®æŒ‡æ ‡

**å‘½ä»¤è¡Œè¾“å‡º**:
```
Training step: X/TOTAL, Step Time: Xs, ETA: HH:MM:SS
```

**æœŸæœ›å€¼**:
- Step Time: <10ç§’ âœ…
- GPUåˆ©ç”¨ç‡: >60% âœ…
- æ˜¾å­˜ä½¿ç”¨: 8-16GB âœ…

### æ£€æŸ¥å‘½ä»¤

```bash
# 1. GPUç›‘æ§
watch -n 1 nvidia-smi

# 2. è¿›ç¨‹ç›‘æ§
htop

# 3. TensorBoard
cd ~/paper_v2/paper/marl_framework/log
tensorboard --logdir . --host 0.0.0.0 --port 6006
```

---

## ğŸ’¡ é…ç½®é€‰æ‹©æŒ‡å—

### å¿«é€Ÿæµ‹è¯•ï¼ˆ2-5å°æ—¶ï¼‰
```yaml
n_episodes: 300
batch_size: 32
batch_number: 2
data_passes: 1
```

### æ ‡å‡†è®­ç»ƒï¼ˆ10-20å°æ—¶ï¼‰
```yaml
n_episodes: 1000
batch_size: 64
batch_number: 3
data_passes: 3
```

### å®Œæ•´è®­ç»ƒï¼ˆ30-50å°æ—¶ï¼‰
```yaml
n_episodes: 1500
batch_size: 64
batch_number: 3
data_passes: 3
```

### æ·±åº¦è®­ç»ƒï¼ˆ50-100å°æ—¶ï¼‰
```yaml
n_episodes: 2000
batch_size: 128
batch_number: 5
data_passes: 5
```

---

## ğŸ“ å»ºè®®çš„è®­ç»ƒæµç¨‹

### ç¬¬ä¸€æ¬¡è®­ç»ƒ
1. **å¿«é€Ÿæµ‹è¯•** (300 episodes) - éªŒè¯ä»£ç æ­£å¸¸
2. **æ ‡å‡†è®­ç»ƒ** (1000 episodes) - è·å¾—åŸºæœ¬æ€§èƒ½
3. **å®Œæ•´è®­ç»ƒ** (1500 episodes) - è·å¾—æœ€ä½³æ€§èƒ½
4. **è°ƒä¼˜è®­ç»ƒ** (æ ¹æ®ç»“æœè°ƒæ•´è¶…å‚æ•°)

### å½“å‰å»ºè®®
ä½¿ç”¨**æ ‡å‡†è®­ç»ƒé…ç½®** (å·²åº”ç”¨):
- åˆç†çš„è®­ç»ƒæ—¶é—´ (10-20å°æ—¶)
- è¶³å¤Ÿçš„è®­ç»ƒé‡
- è‰¯å¥½çš„æ€§èƒ½è¡¨ç°

---

## âš™ï¸ åº”ç”¨æ–°é…ç½®

### æ–¹æ³•1: åœæ­¢å¹¶é‡å¯ï¼ˆæ¨èï¼‰

```bash
# 1. åœ¨è®­ç»ƒç»ˆç«¯æŒ‰ Ctrl+C
# 2. æ‹‰å–æœ€æ–°é…ç½®
cd ~/paper_v2/paper
git pull

# 3. é‡æ–°å¼€å§‹è®­ç»ƒ
cd marl_framework
export LD_LIBRARY_PATH=$CONDA_PREFIX/lib:$LD_LIBRARY_PATH
python main.py
```

### æ–¹æ³•2: ç­‰å¾…è§‚å¯Ÿ

ç»§ç»­è§‚å¯Ÿå½“å‰è®­ç»ƒ:
- å¦‚æœåç»­æ­¥éª¤åŠ é€Ÿåˆ°<20ç§’ï¼Œå¯ä»¥ç»§ç»­
- å¦‚æœä¸€ç›´å¾ˆæ…¢(>60ç§’)ï¼Œå»ºè®®åœæ­¢é‡æ–°é…ç½®

---

**å»ºè®®**: ç«‹å³åœæ­¢å½“å‰è®­ç»ƒï¼Œä½¿ç”¨ä¼˜åŒ–åçš„é…ç½®é‡æ–°å¼€å§‹ï¼Œé¢„è®¡10-20å°æ—¶å®Œæˆï¼
