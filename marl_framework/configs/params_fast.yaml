# å¿«é€Ÿè®­ç»ƒé…ç½® - ä¼˜åŒ–GPUåˆ©ç”¨ç‡ + å®Œæ•´æ–°è®¾è®¡åŠŸèƒ½
# ä½¿ç”¨æ–¹æ³•: export CONFIG_FILE_PATH=configs/params_fast.yaml && python main.py
# 
# ğŸš€ æ–°å¢åŠŸèƒ½:
# - âœ… åŒºåŸŸæœç´¢ç®¡ç† (SearchRegionManager)
# - âœ… å‰æ²¿æ¢æµ‹å¥–åŠ± (FrontierManager) 
# - âœ… ç›®æ ‡å‘ç°å¥–åŠ± (å·¨å¤§å¥–åŠ±+50.0)
# - âœ… ååŒæœºåˆ¶ (CoordinationManager)
# - âœ… 9å±‚çŠ¶æ€è¡¨ç¤º (æ¦‚ç‡å›¾+å‘ç°å†å²+æ¢ç´¢å¼ºåº¦)
# - âœ… å¤šå±‚å¥–åŠ±æ¶æ„ (è§£å†³ç¨€ç–å¥–åŠ±é—®é¢˜)
#
# âš¡ å¿«é€Ÿè®­ç»ƒå‚æ•°:
# - Budget: 8æ­¥ (vs æ ‡å‡†14æ­¥)
# - Episodes: 500 (vs æ ‡å‡†1500)
# - é¢„è®¡æ—¶é—´: 8-12å°æ—¶
# - æ¨¡å‹æ€§èƒ½: ~80-85%

# ==================== è·¯å¾„é…ç½® ====================
paths:
  # æ—¥å¿—å­˜å‚¨è·¯å¾„ (å¯ä»¥æ˜¯ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹äºmarl_frameworkçš„è·¯å¾„)
  log_dir: "log"                    # é»˜è®¤: marl_framework/log
  # ç»“æœå­˜å‚¨è·¯å¾„ (å¯ä»¥æ˜¯ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹äºmarl_frameworkçš„è·¯å¾„)  
  results_dir: "res"                # é»˜è®¤: marl_framework/res
  
  # ç¤ºä¾‹å…¶ä»–é…ç½®:
  # log_dir: "E:/my_logs"           # ç»å¯¹è·¯å¾„
  # results_dir: "../paper_results" # ç›¸å¯¹äºmarl_frameworkçš„ä¸Šçº§ç›®å½•
  # log_dir: "/tmp/marl_logs"       # Linuxç»å¯¹è·¯å¾„

environment:
  num_envs: 2
  seed: 3
  x_dim: 50
  y_dim: 50

sensor:
  type: "rgb_camera"
  field_of_view:
    angle_x: 60
    angle_y: 60
  pixel:
    number_x: 57
    number_y: 57
  encoding: "rgb8"
  model:
    type: "altitude_dependent"
    coeff_a: 0.05
    coeff_b: 0.2
  simulation:
    type: "random_field"
    cluster_radius: 5
    # åœ°å›¾ç”Ÿæˆæ–¹å¼:
    # - ç”¨ region_based å±•ç¤º"æœ‰å…ˆéªŒä¿¡æ¯æ—¶çš„é«˜æ•ˆæœç´¢"
    # - ç”¨ random_field å±•ç¤º"æ— å…ˆéªŒä¿¡æ¯æ—¶çš„é²æ£’æœç´¢"
    # - å¯¹æ¯”åˆ†æï¼šå…ˆéªŒä¿¡æ¯çš„ä»·å€¼
    # - "random_field": ä½¿ç”¨åŸå§‹éšæœºåœºç”Ÿæˆï¼ˆç‹¬ç«‹äº search_regionsï¼‰
    # - "region_based": æ ¹æ® search_regions é…ç½®ç”Ÿæˆç›®æ ‡åˆ†å¸ƒ
    map_type: "region_based"  # æ”¹ä¸º "random_field" å¯åˆ‡æ¢å›éšæœºæ¨¡å¼

mapping:
  prior: 0.5

# ==================== æœç´¢åŒºåŸŸå®šä¹‰ ====================
search_regions:
  regions:
    - name: "high_priority_zone"
      type: "rectangle"
      priority: 1.0
      min_coverage: 0.90
      coordinates: [[10, 10, 25, 25]]
      search_density: "high"
      target_probability: 0.6
      
    - name: "medium_priority_zone"
      type: "rectangle"
      priority: 0.6
      min_coverage: 0.80
      coordinates: [[30, 10, 45, 25]]
      search_density: "medium"
      target_probability: 0.3
      
    - name: "low_priority_zone"
      type: "rectangle"
      priority: 0.3
      min_coverage: 0.65
      coordinates: [[10, 30, 45, 45]]
      search_density: "low"
      target_probability: 0.1
  
  strategy:
    mode: "priority_based"
    allow_overlap: false
    revisit_threshold: 0.1
    completion_threshold: 0.85
  
  density_requirements:
    high: 3
    medium: 2
    low: 1

experiment:
  title: "fast_training"
  constraints:
    spacing: 5       # å¿…é¡»ä¸ºæ•´æ•°ï¼Œä»¥ä¼˜åŒ–è®¡ç®—
    min_altitude: 5
    max_altitude: 25
    budget: 8                # â† ä»14å‡åˆ°8ï¼Œå¤§å¹…å‡å°‘CPUè®¡ç®—
    num_actions: 6
  uav:
    max_v: 5
    max_a: 2
    sampling_time: 2
    communication_range: 25
    fix_range: True
    failure_rate: 0
  missions:
    type: "COMA"
    mission_mode: "training"
    n_episodes: 500          # â† ä»1500å‡åˆ°500ï¼Œå¿«é€Ÿæµ‹è¯•
    patience: 100
    n_agents: 4
    action_space: "larger"
    planning_uncertainty: "SE"
    eps_max: 0.5
    eps_min: 0.02
    eps_anneal_phase: 10000
    use_eps: True
    class_weighting: [0, 1] 
    reward_normalization: false
  coverage_weight: 0.15
  distance_weight: 0.0
  footprint_weight: 0.5
  collision_weight: 2.0
  collision_distance: 5.0
  altitude_diversity_weight: 0.5  # é«˜åº¦å¤šæ ·æ€§å¥–åŠ±æƒé‡: é¼“åŠ±agentsåœ¨ä¸åŒé«˜åº¦æ¢ç´¢
  
  # ==================== éšœç¢ç‰©é¿éšœé…ç½® ====================
  obstacles:
    enable: true                    # å¯ç”¨éšœç¢ç‰©é¿éšœåŠŸèƒ½
    safety_margin: 2.0              # å®‰å…¨è¾¹ç•Œï¼ˆç±³ï¼‰- åœ¨éšœç¢ç‰©åŠå¾„å¤–é¢å¤–2ç±³çš„ç¼“å†²åŒº
    collision_penalty: 50.0         # å®Œå…¨ç¢°æ’çš„æƒ©ç½šå€¼
    obstacle_penalty_weight: 1.0    # éšœç¢ç‰©æƒ©ç½šæƒé‡ï¼ˆç”¨äºå¥–åŠ±å‡½æ•°ï¼‰
    
    # å›ºå®šéšœç¢ç‰©åˆ—è¡¨ - ä¸visualization.obstacleså¯¹åº”
    # è¿™äº›éšœç¢ç‰©ä¼šå½±å“UAVçš„è·¯å¾„è§„åˆ’å’ŒåŠ¨ä½œé€‰æ‹©
    fixed_obstacles:
      # åŸæœ‰éšœç¢ç‰©ï¼ˆä¸å¯è§†åŒ–ä¿æŒä¸€è‡´ï¼‰
      - x: 15.0
        y: 25.0
        z: 0.0
        height: 12.0
        radius: 2.75      # åœ†æŸ±å½¢éšœç¢ç‰©åŠå¾„
      
      - x: 35.0
        y: 15.0
        z: 0.0
        height: 15.0
        radius: 2.75
      
      - x: 25.0
        y: 40.0
        z: 0.0
        height: 10.0
        radius: 2.75
      
      # é«˜ä¼˜å…ˆçº§åŒºåŸŸé™„è¿‘çš„éšœç¢ç‰©
      - x: 20.0
        y: 12.0
        z: 0.0
        height: 8.0
        radius: 2.75
      
      - x: 12.0
        y: 22.0
        z: 0.0
        height: 14.0
        radius: 2.75
      
      # ä¸­ä¼˜å…ˆçº§åŒºåŸŸçš„éšœç¢ç‰©
      - x: 38.0
        y: 18.0
        z: 0.0
        height: 11.0
        radius: 2.75
      
      - x: 42.0
        y: 22.0
        z: 0.0
        height: 9.0
        radius: 2.75
      
      # åŒºåŸŸè¿æ¥å¤„çš„éšœç¢ç‰©
      - x: 28.0
        y: 18.0
        z: 0.0
        height: 13.0
        radius: 2.75
      
      - x: 18.0
        y: 32.0
        z: 0.0
        height: 16.0
        radius: 2.75
      
      - x: 40.0
        y: 38.0
        z: 0.0
        height: 7.0
        radius: 2.75
  
  # ==================== æ–°è®¾è®¡1: å†…åœ¨å¥–åŠ±æœºåˆ¶ (è§£å†³ç¨€ç–å¥–åŠ±) ====================
  intrinsic_rewards:
    enable: true
    
    # 1.1 å‰æ²¿æ¢æµ‹é©±åŠ¨ (æ ¸å¿ƒåˆ›æ–°)
    frontier_reward_weight: 1.0
    frontier_detection_threshold: 0.3
    
    # 1.2 è¦†ç›–ç‡é©±åŠ¨
    coverage_exploration_weight: 0.6
    coverage_decay_factor: 0.95
    
    # 1.3 æœç´¢å®Œå¤‡æ€§å¥–åŠ±
    completeness_weight: 0.3
    confidence_threshold: 0.8
  
  # ==================== æ–°è®¾è®¡2: ååŒæœºåˆ¶ ====================
  coordination:
    enable: true
    
    # æŠ—é‡å æƒ©ç½š
    overlap_penalty_weight: 1.2
    overlap_threshold: 0.3
    
    # åŒºåŸŸåˆ†å·¥å¥–åŠ±
    division_reward_weight: 0.6
    region_assignment_bonus: 0.8
    
    # ååŒå‘ç°å¥–åŠ±
    joint_discovery_weight: 1.5
    collaboration_distance: 15.0
    
    # é€šä¿¡æ•ˆç‡
    communication_cost: 0.01
  
  # ==================== æ–°è®¾è®¡3: ç›®æ ‡å‘ç°å¥–åŠ±æœºåˆ¶ ==================== 
  target_discovery_reward: 50.0     # é¦–æ¬¡å‘ç°ç›®æ ‡çš„å·¨å¤§æ­£å¥–åŠ±
  mission_success_reward: 100.0     # ä»»åŠ¡æˆåŠŸå®Œæˆå¥–åŠ±
  mission_failure_penalty: -50.0    # ä»»åŠ¡å¤±è´¥æƒ©ç½š
  collaborative_discovery_weight: 25.0  # ååŒå‘ç°å¥–åŠ±æƒé‡
  discovery_threshold: 0.8           # ç›®æ ‡å‘ç°çš„ç½®ä¿¡åº¦é˜ˆå€¼
  
  # ==================== æ–°è®¾è®¡4: åŒºåŸŸæœç´¢å¥–åŠ± ==================== 
  region_coverage_weight: 0.6       # åŒºåŸŸè¦†ç›–å¥–åŠ±æƒé‡
  region_priority_weight: 0.5       # åŒºåŸŸä¼˜å…ˆçº§å¥–åŠ±æƒé‡
  search_density_weight: 0.4        # æœç´¢å¯†åº¦å¥–åŠ±æƒé‡
  search_completion_weight: 1.0     # æœç´¢å®Œæˆå¥–åŠ±æƒé‡
  redundant_search_penalty: -0.6    # å†—ä½™æœç´¢æƒ©ç½š
  region_transition_penalty: -0.2   # åŒºåŸŸè½¬æ¢æƒ©ç½š
  
  baselines:
    lawnmower:
      trials: 50
      altitude: 5
    random:
      n_episodes: 50
    information_gain:
      trials: 50
      communication: true

# ==================== æ–°è®¾è®¡5: æœç´¢ä¸“ç”¨çŠ¶æ€è¡¨ç¤º ====================
state_representation:
  # å‘ç°å†å²å›¾
  use_discovery_history: true
  discovery_influence_radius: 2
  
  # æ¢ç´¢å¼ºåº¦å›¾  
  use_exploration_intensity: true
  exploration_decay_factor: 0.9
  
  # ç›®æ ‡æ¦‚ç‡å›¾
  use_target_probability: true
  
  # æœç´¢ç½®ä¿¡åº¦å›¾
  use_confidence_map: true
  confidence_update_rate: 0.1
  
  # å‰æ²¿å›¾
  use_frontier_map: true
  frontier_kernel_size: 3
  
  # è”åˆæœç´¢å‰æ™¯å›¾
  use_joint_prospect: true
  prospect_fusion_method: "max"

evaluation:
  repetitions: 1
  metrics:
    # åŸºç¡€æŒ‡æ ‡
    - "num_waypoints"
    - "paths"
    - "rmse"
    - "wrmse"
    - "mll" 
    - "wmll"
    - "run_time"
    # æœç´¢ä¸“ç”¨æŒ‡æ ‡
    - "target_discovery_rate"
    - "search_efficiency"
    - "collaboration_index"
    - "region_completion_rate"

networks:
  device: "cuda"
  type: "CNN"
  data_passes: 2           # â† ä»3å‡åˆ°2
  batch_size: 32           # â† ä»64å‡åˆ°32
  batch_number: 2          # â† ä»3å‡åˆ°2
  copy_rate: 10
  gamma: 0.99
  lambda: 0.8
  actor:
    hidden_dim: 128
    learning_rate: 0.00001
    momentum: 0.9
    gradient_norm: 10
  critic:
    target_update_mode: "hard"
    tau: 0.01
    update_mode: "random_batches"
    synchronization: "no"
    fc1_dim: 64
    learning_rate: 0.0001
    momentum: 0.9
    gradient_norm: 10

classification:
  n_episodes: 300
  data_split: [0.4, 0.4, 0.2]
  number_epochs: 100
  batch_size: 50

# ==================== å¯è§†åŒ–é…ç½® ====================
visualization:
  # éšœç¢ç‰©é…ç½® (å¯é€‰ - å¦‚æœä¸é…ç½®ä¼šè‡ªåŠ¨ç”Ÿæˆéšæœºéšœç¢ç‰©)
  # ç”¨äºåœ¨è½¨è¿¹å›¾ä¸­æ˜¾ç¤ºç©ºä¸­éšœç¢ç‰© (æ ‘æœ¨ã€å±±å³°ç­‰)
  obstacles:
    # åŸæœ‰éšœç¢ç‰©
    - x: 15      # Xåæ ‡ (ç±³)
      y: 25      # Yåæ ‡ (ç±³)
      z: 0       # åº•éƒ¨é«˜åº¦ (ç±³, é€šå¸¸ä¸º0)
      height: 12 # éšœç¢ç‰©é«˜åº¦ (ç±³)
    
    - x: 35
      y: 15
      z: 0
      height: 15
    
    - x: 25
      y: 40
      z: 0
      height: 10
    
    # æ–°å¢éšœç¢ç‰© - åœ¨é«˜ä¼˜å…ˆçº§åŒºåŸŸé™„è¿‘å¢åŠ æŒ‘æˆ˜
    - x: 20      # é«˜ä¼˜å…ˆçº§åŒºåŸŸè¾¹ç¼˜
      y: 12
      z: 0
      height: 8
    
    - x: 12      # é«˜ä¼˜å…ˆçº§åŒºåŸŸå†…éƒ¨
      y: 22
      z: 0
      height: 14
    
    # ä¸­ä¼˜å…ˆçº§åŒºåŸŸçš„éšœç¢ç‰©
    - x: 38      # ä¸­ä¼˜å…ˆçº§åŒºåŸŸä¸­å¿ƒ
      y: 18
      z: 0
      height: 11
    
    - x: 42      # ä¸­ä¼˜å…ˆçº§åŒºåŸŸè¾¹ç¼˜
      y: 22
      z: 0
      height: 9
    
    # è¾¹ç•Œå’Œè¿æ¥åŒºåŸŸçš„éšœç¢ç‰©
    - x: 28      # ä¸¤ä¸ªä¼˜å…ˆçº§åŒºåŸŸä¹‹é—´
      y: 18
      z: 0
      height: 13
    
    - x: 18      # ä½ä¼˜å…ˆçº§åŒºåŸŸå…¥å£
      y: 32
      z: 0
      height: 16
    
    - x: 40      # ä½ä¼˜å…ˆçº§åŒºåŸŸå³ä¾§
      y: 38
      z: 0
      height: 7
  
  # æœªæ¥å¯æ‰©å±•:
  # - åŠ¨æ€éšœç¢ç‰©
  # - é£åœºå¯è§†åŒ–
  # - é€šä¿¡èŒƒå›´æ˜¾ç¤º

# ==================== é…ç½®è¯´æ˜ ====================
# 
# ğŸ¯ æ–°è®¾è®¡è§„åˆ’æ–¹æ³•å®Œæ•´é›†æˆ:
# 
# 1. ç¨€ç–å¥–åŠ±è§£å†³æ–¹æ¡ˆ:
#    - ç›®æ ‡å‘ç°å¥–åŠ±: +50.0 (å·¨å¤§å³æ—¶å¥–åŠ±)
#    - å‰æ²¿æ¢æµ‹å¥–åŠ±: æŒç»­æ¢ç´¢æ¿€åŠ±
#    - ååŒå‘ç°å¥–åŠ±: å›¢é˜Ÿåˆä½œå¥–åŠ±
#    - ä»»åŠ¡å®Œæˆå¥–åŠ±: +100.0 ç»ˆæç›®æ ‡
# 
# 2. ååŒæœºåˆ¶æ”¹è¿›:
#    - æŠ—é‡å æƒ©ç½š: é¿å…è·¯å¾„/è§‚æµ‹é‡å¤
#    - åŒºåŸŸåˆ†å·¥: é¼“åŠ±æ™ºèƒ½ä½“åˆ†æ•£æœç´¢
#    - ååŒå‘ç°: å¥–åŠ±å¤šæœºååŒæœç´¢é«˜ä¼˜å…ˆçº§åŒºåŸŸ
#    - é€šä¿¡æˆæœ¬: ç ”ç©¶é€šä¿¡çº¦æŸä¸‹çš„æ€§èƒ½
# 
# 3. æœç´¢ä¸“ç”¨çŠ¶æ€è¡¨ç¤º (9å±‚è¾“å…¥):
#    - é¢„ç®—å›¾ + ä½ç½®å›¾ + æ™ºèƒ½ä½“IDå›¾
#    - åŠ æƒç†µå›¾ + å±€éƒ¨ç†µå›¾ + æ¦‚ç‡å›¾ â­
#    - è¶³è¿¹å›¾ + å‘ç°å†å²å›¾ â­ + æ¢ç´¢å¼ºåº¦å›¾ â­
#
# 4. åŒºåŸŸæœç´¢ç®¡ç†:
#    - 3ä¸ªä¼˜å…ˆçº§åŒºåŸŸ (é«˜/ä¸­/ä½)
#    - åŒºåŸŸåˆ†å·¥å’Œåè°ƒ
#    - æœç´¢å¯†åº¦æ§åˆ¶
#    - å®Œæˆåº¦è·Ÿè¸ª
#
# 5. å‰æ²¿æ¢æµ‹ç³»ç»Ÿ:
#    - è‡ªåŠ¨è¯†åˆ«æ¢ç´¢è¾¹ç•Œ
#    - è·ç¦»å¥–åŠ±å¼•å¯¼
#    - å‰æ²¿å›¾çŠ¶æ€è¡¨ç¤º
#
# 6. éšœç¢ç‰©é¿éšœç³»ç»Ÿ: â­ NEW
#    - 3Dåœ†æŸ±å½¢éšœç¢ç‰©ï¼ˆæ ‘æœ¨ã€å±±å³°ç­‰ï¼‰
#    - å®‰å…¨è¾¹ç•Œ: 2.0ç±³ç¼“å†²åŒº
#    - åŠ¨ä½œæ©ç : è‡ªåŠ¨å±è”½ç¢°æ’åŠ¨ä½œ
#    - æ¸å˜æƒ©ç½š: åŸºäºè·ç¦»çš„å¥–åŠ±å¡‘å½¢
#    - ç¢°æ’æ£€æµ‹: å®æ—¶è·¯å¾„éªŒè¯
#    - å¯è§†åŒ–: 3Dè½¨è¿¹å›¾ä¸­æ˜¾ç¤ºéšœç¢ç‰©
#    - 10ä¸ªå›ºå®šéšœç¢ç‰©è¦†ç›–æ‰€æœ‰æœç´¢åŒºåŸŸ
#
# å¿«é€Ÿè®­ç»ƒä¼˜åŒ–:
# - budget: 8 (å‡å°‘æ¯ä¸ªepisodeçš„æ­¥æ•°ï¼Œå‡è½»CPUå‹åŠ›)
# - n_episodes: 500 (å¿«é€ŸéªŒè¯è®­ç»ƒæ•ˆæœ)  
# - batch_size: 32 (å‡å°‘å†…å­˜å’Œè®¡ç®—å‹åŠ›)
# - data_passes: 2 (åŠ å¿«è®­ç»ƒå¾ªç¯)
#
# é¢„æœŸæ•ˆæœ:
# - æ€»è®­ç»ƒæ­¥æ•°: ~2,083æ­¥
# - é¢„è®¡æ—¶é—´: 8-12å°æ—¶ (åŒ…å«æ–°åŠŸèƒ½+é¿éšœ)
# - GPUåˆ©ç”¨ç‡: 20-40%
# - æ¨¡å‹æ€§èƒ½: 80-85% (ç›¸æ¯”å®Œæ•´é…ç½®)
# - æ–°åŠŸèƒ½éªŒè¯: å®Œæ•´è¦†ç›–æ‰€æœ‰åˆ›æ–°ç‚¹ï¼ˆåŒ…æ‹¬é¿éšœï¼‰
